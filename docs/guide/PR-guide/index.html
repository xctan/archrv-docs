<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-guide/PR-guide">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Arch Linux RISC-V Packaging Guide RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Arch Linux RISC-V Packaging Guide Atom Feed"><title data-rh="true">代码规范 | Arch Linux RISC-V Packaging Guide</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://riscv-notes.sh1mar.in/docs/guide/PR-guide"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="代码规范 | Arch Linux RISC-V Packaging Guide"><meta data-rh="true" name="description" content="这一章描述一些大家推荐的惯用规范。"><meta data-rh="true" property="og:description" content="这一章描述一些大家推荐的惯用规范。"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://riscv-notes.sh1mar.in/docs/guide/PR-guide"><link data-rh="true" rel="alternate" href="https://riscv-notes.sh1mar.in/docs/guide/PR-guide" hreflang="en"><link data-rh="true" rel="alternate" href="https://riscv-notes.sh1mar.in/docs/guide/PR-guide" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.48cc2458.css">
<link rel="preload" href="/assets/js/runtime~main.1e457bc7.js" as="script">
<link rel="preload" href="/assets/js/main.42ec8c8f.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="ArchRV-Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="ArchRV-Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">ArchRV-Manual</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Documents</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/felixonmars/archriscv-packages" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">简介</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/guide/start-guide">Guide</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/start-guide">设置 RISC-V QEMU 环境</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/build-guide">build-guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guide/PR-guide">代码规范</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/tools">工具介绍</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guide/bug-report">如何给 Arch 报 BUG</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/record/collection">Record</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Guide</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">代码规范</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>代码规范</h1><p>这一章描述一些大家推荐的惯用规范。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="建议">建议<a class="hash-link" href="#建议" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-上游优先级最高">1. 上游优先级最高<a class="hash-link" href="#1-上游优先级最高" title="Direct link to heading">​</a></h3><p>你对代码的所有修改都先提交给上游，然后你可以在 PKGBUILD 里引用你发 PR 的 patch。
提交给上游的代码会加钱。</p><p>如果 PKGBUILD 在 x86-64 也 FTBFS，一定要到 archlinux 报 BUG，这个也加钱。
你可以参考<a href="/docs/guide/bug-report">这篇文章</a>来了解汇报 BUG 的流程。</p><p>如果这个 patch 里的错误或者你对源码的修改反馈给了上游或者交给了 Arch Linux，
要在给仓库的 PR 里注明提交给上游的链接，或者给 Arch 的 BUG Report 链接。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-给所有的修改注释">2. 给所有的修改注释<a class="hash-link" href="#2-给所有的修改注释" title="Direct link to heading">​</a></h3><p>尽量在 commit message，或者 pr 里写清楚修改的原因。
讲清楚“为什么”属于我们工作流的一部分。
一是为了以后方便维护，看着这个修改就知道原因。
还有就是能帮助新人，让他们来仓库查相关错误时能快速检索。</p><p>修改 PKGBUILD 中的内容也需要写清楚修改原因，
比如添加 make 参数， 修改 cflags 之类的。
用 <code>#</code> 在修改旁注释需要写一下这么修改的原因。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pr-的流程">PR 的流程<a class="hash-link" href="#pr-的流程" title="Direct link to heading">​</a></h2><ol><li>每一次修改都从 master 分支的头创建一个新的分支，分支名可以随意，
通常我们用包的名字来当分支名。</li><li>创建一个和包名字同名的文件夹，把从 PKGBUILD 生成的 riscv64.patch 文件，
和对源码修改的 patch 放在同一个文件夹。</li><li>commit 并发起 PR</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="commit-title">Commit Title<a class="hash-link" href="#commit-title" title="Direct link to heading">​</a></h3><ul><li>如果当前仓库没有这个包的 patch，标题用 <code>addpkg: pkgname</code></li><li>如果你的 PR 是对原有包的修改，标题用 <code>upgpkg: pkgname</code></li><li>如果你的 PR 是删除掉仓库内的 patch，标题用 <code>rmvpkg: pkgname</code></li></ul><p>同时强烈建议不要只用 <code>git commit -m &quot;title&quot;</code>，建议在 commit body 里
写清楚这次修改的内容和原因。然后在 PR 的信息里也要写清楚。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何创建-patch">如何创建 patch<a class="hash-link" href="#如何创建-patch" title="Direct link to heading">​</a></h2><ul><li>如果你还未 stage 修改：</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">bash</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">diff</span><span class="token plain"> --no-prefix </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> riscv64.patch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>如果你已经 stage 了修改</li></ul><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">bash</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">diff</span><span class="token plain"> --no-prefix --cached </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> riscv64.patch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>--no-prefix</code> 参数会去掉前缀的 <code>a/ b/</code> 路径字符。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="patch-的格式问题">patch 的格式问题<a class="hash-link" href="#patch-的格式问题" title="Direct link to heading">​</a></h2><p>用上述方法打出来的补丁通常是以下的格式：</p><div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">riscv64.patch</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git trunk/PKGBUILD trunk/PKGBUILD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token coord">--- trunk/PKGBUILD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token coord">+++ trunk/PKGBUILD</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>你需要删除掉所有的 <code>trunk</code> 字符：</p><div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">riscv64.patch</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">diff --git PKGBUILD PKGBUILD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token coord">--- PKGBUILD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token coord">+++ PKGBUILD</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">diff</span><span class="token plain"> --no-prefix </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;s/trunk\///&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> riscv64.patch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>也可以用下面这个脚本来直接去除这些字符：</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">console</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">git</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">diff</span><span class="token plain"> --no-index --no-prefix PKGBUILD.orig PKGBUILD </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> filterdiff --clean --strip</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> riscv64.patch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="提交-pr-的一些格式注意事项">提交 PR 的一些格式注意事项<a class="hash-link" href="#提交-pr-的一些格式注意事项" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="数组的格式">数组的格式<a class="hash-link" href="#数组的格式" title="Direct link to heading">​</a></h3><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">PKGBUILD</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token assign-left variable" style="color:#36acaa">source</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;http://www.frodo.looijaard.name/system/files/software/</span><span class="token string variable" style="color:#36acaa">${pkgname}</span><span class="token string" style="color:#e3116c">/</span><span class="token string variable" style="color:#36acaa">${pkgname}</span><span class="token string" style="color:#e3116c">-</span><span class="token string variable" style="color:#36acaa">${pkgver}</span><span class="token string" style="color:#e3116c">.tar.gz&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;psiconv.patch&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># &lt;- 注意括号要跟在最后一个文件后，不要创建新行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">#^</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic"># 注意这里要对齐</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">md5sums</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;286e427b10f4d10aaeef1944210a2ea6&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">         </span><span class="token string" style="color:#e3116c">&#x27;4fb974d3ae3058de435050d1595f269b&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Reference:
<a href="https://github.com/felixonmars/archriscv-packages/pull/148/commits/839b90f662cc942f9c1b1f80284d93e4d48dd5a5" target="_blank" rel="noopener noreferrer">https://github.com/felixonmars/archriscv-packages/pull/148/commits/839b90f662cc942f9c1b1f80284d93e4d48dd5a5</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="不要提交对-arch-的修改">不要提交对 arch 的修改<a class="hash-link" href="#不要提交对-arch-的修改" title="Direct link to heading">​</a></h3><p>肥猫的构建脚本会把这个处理好，在 PR 的时候不用提交对 arch 的修改。</p><blockquote><p>Reference:
<a href="https://github.com/felixonmars/archriscv-packages/pull/488/commits/116365a132e9e973ab152514d59ed6688fdc3799" target="_blank" rel="noopener noreferrer">https://github.com/felixonmars/archriscv-packages/pull/488/commits/116365a132e9e973ab152514d59ed6688fdc3799</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="其他规范">其他规范<a class="hash-link" href="#其他规范" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="source-上游文件名问题"><code>source</code> 上游文件名问题<a class="hash-link" href="#source-上游文件名问题" title="Direct link to heading">​</a></h3><p>建议给 src 引用的文件取独特的名字，比如</p><p><code>${pkgname}-xxxpatch::https://...</code></p><p>因为从 source 数组里下载的文件都会放进 SRCDEST 里，有概率和别的包下载的东西同名，
然后 archbuild 以为下载过了就直接用，然后 checksum 就对不上了。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="上游已经修复编译错误但还没发版本">上游已经修复编译错误但还没发版本<a class="hash-link" href="#上游已经修复编译错误但还没发版本" title="Direct link to heading">​</a></h3><p>记得测试一下 x86 会不会有编译失败的问题，优先给 Arch Linux 提交补丁。</p><ul><li>用 cherry-pick</li></ul><div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">PKGBUILD</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">prepare() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">  cd $pkgname</span><br></span><span class="token-line" style="color:#393A34"><span class="token unchanged line"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">  git cherry-pick -n 508c0f94e5f182e50ff61be6e04f72574dee97cb  # patch: Don&#x27;t alter or try to write [GtkChild] fields</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">  git cherry-pick -n e8a0aeec350ea80349582142c0e8e3cd3f1bce38  # patch: Reference of [GtkChild] fields is handled by GtkBuilder, type must be unowned</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>直接从上游下载 patch</li></ul><div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">PKGBUILD</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">source=(https://github.com/MegaGlest/megaglest-source/releases/download/${pkgver}/megaglest-source-${pkgver}.tar.xz{,.asc}</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">        ftp-fixes.patch::https://github.com/MegaGlest/megaglest-source/commit/5a3520540276a6fd06f7c88e571b6462978e3eab.patch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">prepare() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">  cd megaglest-${pkgver}</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">  patch -Np1 -i ../ftp-fixes.patch</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><blockquote><p>Reference:</p><ul><li><a href="https://github.com/felixonmars/archriscv-packages/pull/165" target="_blank" rel="noopener noreferrer">https://github.com/felixonmars/archriscv-packages/pull/165</a></li><li><a href="https://github.com/felixonmars/archriscv-packages/pull/345" target="_blank" rel="noopener noreferrer">https://github.com/felixonmars/archriscv-packages/pull/345</a></li><li><a href="https://github.com/felixonmars/archriscv-packages/pull/348" target="_blank" rel="noopener noreferrer">https://github.com/felixonmars/archriscv-packages/pull/348</a></li><li><a href="https://github.com/felixonmars/archriscv-packages/pull/405" target="_blank" rel="noopener noreferrer">https://github.com/felixonmars/archriscv-packages/pull/405</a></li></ul></blockquote><blockquote><p>Tips: 如何把 PR 的内容以 patch 形式下载</p><p>找到 PR 的那条 commit，在 URL 后边加 .patch/.diff 就能拿到 raw contents。
比如
<a href="https://github.com/felixonmars/archriscv-packages/pull/470/commits/95242a8b610854ef64c8b5e304756ba6a4d4302d" target="_blank" rel="noopener noreferrer">PR #470</a>,
去掉 commit 后的那一串，直接加上 .patch。</p><div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockTitle_Ktv7">diff</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49">...kages/pull/470/commits/95242a8b610854ef64c8b5e304756ba6a4d4302d</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa">...kages/pull/470.patch</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>现在 GitHub 也已经提供了超链接跳转，点击即可跳转。</p></blockquote><p><img loading="lazy" alt="image" src="data:image/png;base64,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" width="635" height="171" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="本地版本过老">本地版本过老<a class="hash-link" href="#本地版本过老" title="Direct link to heading">​</a></h3><p>假设上一次发布的版本特别老，主线做了很多修改，然后引用的修复 patch 行数不对应，
和源码冲突的话，优先发 issue 催上游发新版本。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="修改-pkgrel">修改 PKGREL<a class="hash-link" href="#修改-pkgrel" title="Direct link to heading">​</a></h3><p>pkgrel 不能超过 x86 主线，如果需要重新打包，推荐以 0.1 为递增值逐次往上加。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Avimitin/archrv-docs/docs/guide/3-PR-guide.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_eYIM" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vbeJ"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/guide/build-guide"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">build-guide</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/guide/tools"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">工具介绍</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#建议" class="table-of-contents__link toc-highlight">建议</a><ul><li><a href="#1-上游优先级最高" class="table-of-contents__link toc-highlight">1. 上游优先级最高</a></li><li><a href="#2-给所有的修改注释" class="table-of-contents__link toc-highlight">2. 给所有的修改注释</a></li></ul></li><li><a href="#pr-的流程" class="table-of-contents__link toc-highlight">PR 的流程</a><ul><li><a href="#commit-title" class="table-of-contents__link toc-highlight">Commit Title</a></li></ul></li><li><a href="#如何创建-patch" class="table-of-contents__link toc-highlight">如何创建 patch</a></li><li><a href="#patch-的格式问题" class="table-of-contents__link toc-highlight">patch 的格式问题</a></li><li><a href="#提交-pr-的一些格式注意事项" class="table-of-contents__link toc-highlight">提交 PR 的一些格式注意事项</a><ul><li><a href="#数组的格式" class="table-of-contents__link toc-highlight">数组的格式</a></li><li><a href="#不要提交对-arch-的修改" class="table-of-contents__link toc-highlight">不要提交对 arch 的修改</a></li></ul></li><li><a href="#其他规范" class="table-of-contents__link toc-highlight">其他规范</a><ul><li><a href="#source-上游文件名问题" class="table-of-contents__link toc-highlight"><code>source</code> 上游文件名问题</a></li><li><a href="#上游已经修复编译错误但还没发版本" class="table-of-contents__link toc-highlight">上游已经修复编译错误但还没发版本</a></li><li><a href="#本地版本过老" class="table-of-contents__link toc-highlight">本地版本过老</a></li><li><a href="#修改-pkgrel" class="table-of-contents__link toc-highlight">修改 PKGREL</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Documents</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/felixonmars/archriscv-packages" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Avimitin, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.1e457bc7.js"></script>
<script src="/assets/js/main.42ec8c8f.js"></script>
</body>
</html>